## 4.1 导论

    网络层-数据平面


网络层服务
    在发送主机与接收主机之间传输数据
    网络层协议存在于每一个主机和路由器

    路由器检查每一个经过它的ip数据报头部


    网络层功能：
        路由
            使用路由算法来决定分组从发送主机到目标主机的路径， 路由选择算法， 路由算则协议

        转发
            将分组从路由器的输入接口转发到合适的输出接口

            旅行的类比： 转发相当于通过单个路口， 路由是从源到目的的路径规划过程

    数据平面， 控制平面
        ![1676611794959](image/4-网络层/1676611794959.png)

        ![1676612032568](image/4-网络层/1676612032568.png)


    网络提供的服务模型
        对于单个数据报的服务

        对于数据报流的服务
        ![1676612476096](image/4-网络层/1676612476096.png)

        对于有些网络，源到目标主机的路径中的其他主机都有连接（维护了端到端的状态， 虚电路）， 这种情况是有连接的网络，而对于Internet的TCP/ip网络, 是面向连接的，只有源和目标这两端的主机有位置连接状态的功能
        ![1676612549421](image/4-网络层/1676612549421.png)

        网络层与传输层连接服务的区别
            网络层： 在两个主机之间，涉及到路径上的一些路由器

            传输层：在两个进程之间，可能只体现在端系统上（TCP连接）

        ![1676612930360](image/4-网络层/1676612930360.png)
        internet的网络层，是尽力而为的服务模型， 对带宽，是否丢失，是否保序，延迟量，拥塞控制，都不保证，这些服务在传输层提供了

## 4.2 路由器组成
![1676612901547](image/4-网络层/1676612901547.png)
    路由
        运行路由选择算法，生成路由表
    转发
        从输入到输出链路交换数据报-根据路由表进行分组的转发

输入端口功能：
    ![1676898895749](image/4-网络层/1676898895749.png)

    基于目标的转发
        最长前缀匹配

    通用转发（SDN）


交换结构
    memory， bus, crossbar
    ![1676899058393](image/4-网络层/1676899058393.png)


输出端口
![1676899419885](image/4-网络层/1676899419885.png)


    调度规则： FIFO， 优先权调度， 随机， WFQ

## 4.3 IP 协议
![1676900015215](image/4-网络层/1676900015215.png)

6分45








































